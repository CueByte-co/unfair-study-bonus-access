<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>bonus access verification</title>
  <meta name="description" content="Enter your Gumroad license key to unlock bonus content." />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html,body { height:100%; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
    }

    .card {
      width: 680px;
      max-width: 96%;
      background: #fff;
      border-radius: 18px;
      padding: 42px 48px;
      box-shadow: 0 40px 80px rgba(36, 37, 46, 0.25);
    }

    .header { text-align: center; margin-bottom: 28px; }
    .header h1 { font-size: 28px; color: #111827; letter-spacing: -0.02em; }
    .header p { color: #6b7280; margin-top: 6px; font-size: 14px; }

    .section { max-width: 520px; margin: 0 auto; }
    .section h2 { font-size: 20px; color: #111827; margin-bottom: 10px; }
    .section p { color:#6b7280; margin-bottom: 16px; font-size: 14px; }

    .input {
      display:block;
      width:100%;
      padding:16px 18px;
      border-radius: 12px;
      border: 2px solid #e6e7ee;
      font-size: 15px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
      color: #374151;
      box-sizing: border-box;
    }
    .input:focus { outline: none; border-color: rgba(102,126,234,1); box-shadow: 0 6px 24px rgba(102,126,234,0.12); }

    .cta {
      display:block;
      margin-top: 20px;
      width:100%;
      padding:14px;
      border-radius:12px;
      font-weight: 600;
      font-size: 16px;
      color: white;
      border: none;
      cursor: pointer;
      background: linear-gradient(90deg,#667eea 0%, #7b4bb3 100%);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .cta:hover { transform: translateY(-3px); box-shadow: 0 18px 30px rgba(102,126,234,0.18); }

    .success {
      margin-top: 20px;
      display:none;
      background:#f0f9ff;
      border:1px solid #bae6fd;
      padding:16px;
      border-radius:10px;
    }
    .link-item { background:#fff; padding:12px; border-radius:8px; margin-bottom:10px; border-left: 5px solid #667eea; }
    .link-item h4 { margin-bottom:6px; font-size:14px; color:#111827; }
    .link-item a { color:#667eea; text-decoration:none; font-size:13px; }

    .error { margin-top:12px; display:none; background:#fff1f2; color:#991b1b; padding:12px; border-radius:8px; }

    @media (max-width:720px) {
      .card { padding:28px 20px; }
      .header h1 { font-size:22px; }
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="pageTitle">
    <div class="header">
      <h1 id="pageTitle">bonus access verification</h1>
      <p>Bonus Content Access</p>
    </div>

    <div class="section" aria-live="polite">
      <h2>Enter Your License Key</h2>
      <p>Find your license key in your Gumroad purchase receipt email.</p>

      <input id="licenseKey" class="input" placeholder="6F0E4C97-B72A4E69-A11BF6C4-AF6517E7" maxlength="35" inputmode="latin" autocomplete="off" />

      <button id="verifyBtn" class="cta">Verify & Access Content</button>

      <div id="errorMsg" class="error" role="alert"></div>

      <div id="successBox" class="success" aria-hidden="true">
        <div class="link-item">
          <h4>Notion Workspace (67 AI Study Prompts)</h4>
          <a id="notionLink" href="https://www.notion.so/The-Unfair-Study-Advantage-67-AI-Prompts-42e8ddd3cdb0838ea6e601ead747be25?source=copy_link" target="_blank" rel="noopener noreferrer">Click here to access Notion workspace</a>
        </div>
        <div class="link-item">
          <h4>Daily Planner Template</h4>
          <a id="plannerLink" href="https://www.notion.so/Daily-Planner-2d28ddd3cdb080beb900e03b6a1dfffa?source=copy_link" target="_blank" rel="noopener noreferrer">Click here to access Daily Planner</a>
        </div>
        <div style="margin-top:8px; color:#6b7280; font-size:13px;">
          <strong>How to use:</strong> Duplicate templates to your workspace. Bookmark this page for future access.
        </div>
      </div>
    </div>
  </div>

<script>
  // CONFIG: If you deploy a server to verify licenses, set VERIFY_ENDPOINT to the API URL.
  // Example: const VERIFY_ENDPOINT = 'https://yourserver.example.com/api/verify';
  const VERIFY_ENDPOINT = '';

  const PUBLIC_LINKS = {
    notion: 'https://www.notion.so/The-Unfair-Study-Advantage-67-AI-Prompts-42e8ddd3cdb0838ea6e601ead747be25?source=copy_link',
    planner: 'https://www.notion.so/Daily-Planner-2d28ddd3cdb080beb900e03b6a1dfffa?source=copy_link'
  };

  const licensePattern = /^[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}$/;

  const input = document.getElementById('licenseKey');
  const verifyBtn = document.getElementById('verifyBtn');
  const errorMsg = document.getElementById('errorMsg');
  const successBox = document.getElementById('successBox');

  function showError(msg) {
    errorMsg.textContent = msg;
    errorMsg.style.display = 'block';
  }
  function hideError() {
    errorMsg.style.display = 'none';
  }
  function showSuccess() {
    successBox.style.display = 'block';
    successBox.setAttribute('aria-hidden','false');
    successBox.scrollIntoView({ behavior:'smooth', block:'center' });
  }

  async function verifyLicense() {
    hideError();
    successBox.style.display = 'none';
    const raw = (input.value || '').trim().toUpperCase();
    if (!raw) { showError('⚠️ Please enter your license key'); return; }
    if (!licensePattern.test(raw)) { showError('⚠️ Invalid license key format. Copy it exactly from your receipt email.'); return; }

    if (VERIFY_ENDPOINT) {
      verifyBtn.disabled = true;
      verifyBtn.textContent = 'Verifying...';
      try {
        const res = await fetch(VERIFY_ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type':'application/json' },
          body: JSON.stringify({ licenseKey: raw })
        });
        const data = await res.json();
        if (res.ok && data && data.valid) {
          showSuccess();
        } else {
          showError(data && data.message ? data.message : '⚠️ License not valid.');
        }
      } catch (err) {
        showError('⚠️ Verification failed. Try again later.');
        console.error(err);
      } finally {
        verifyBtn.disabled = false;
        verifyBtn.textContent = 'Verify & Access Content';
      }
      return;
    }

    // Client-only fallback (not secure) — format-only
    showSuccess();
  }

  verifyBtn.addEventListener('click', verifyLicense);
  input.addEventListener('keypress', (e) => { if (e.key === 'Enter') verifyLicense(); });
  input.focus();
</script>
</body>
</html>
